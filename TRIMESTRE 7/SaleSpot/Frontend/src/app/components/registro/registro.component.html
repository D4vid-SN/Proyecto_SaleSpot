<div class="fondo">
  <div class="container mt-5">
    <div class="form-container">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title text-center">Registro de Usuario</h2>


          <form (ngSubmit)="registrarUsuario()">
            <div class="form-group">
              <label for="tdoc_user">Tipo de Documento<span class="obligatorio"></span>:</label>
              <select class="form-control" id="tdoc_user" name="tdoc_user" [(ngModel)]="nuevoUsuario.tdoc_user"
                required>
                <option *ngFor="let tipoDoc of tiposDocumento" [value]="tipoDoc.tdoc">{{ tipoDoc.desc_tdoc }}</option>
              </select>
              <div *ngIf="submitted && !nuevoUsuario.tdoc_user" class="invalid-feedback">Debe seleccionar un tipo de
                documento.</div>
            </div>
            <div class="form-group">
              <label for="id_user">Número de Identificación<span class="obligatorio"></span>:</label>
              <input type="number" class="form-control" id="id_user" name="id_user" [(ngModel)]="nuevoUsuario.id_user"
                required>
              <div *ngIf="submitted && !nuevoUsuario.id_user" class="invalid-feedback">El número de identificación es
                obligatorio.</div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="nombre_1">Primer Nombre<span class="obligatorio"></span>:</label>
                  <input type="text" class="form-control" id="nombre_1" name="nombre_1"
                    [(ngModel)]="nuevoUsuario.nombre_1" required>
                  <div *ngIf="submitted && !nuevoUsuario.nombre_1" class="invalid-feedback">El primer nombre es
                    obligatorio.</div>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="nombre_2">Segundo Nombre:</label>
                  <input type="text" class="form-control" id="nombre_2" name="nombre_2"
                    [(ngModel)]="nuevoUsuario.nombre_2">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="apellido_1">Primer Apellido<span class="obligatorio"></span>:</label>
                  <input type="text" class="form-control" id="apellido_1" name="apellido_1"
                    [(ngModel)]="nuevoUsuario.apellido_1" required>
                  <div *ngIf="submitted && !nuevoUsuario.apellido_1" class="invalid-feedback">El primer apellido es
                    obligatorio.</div>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="apellido_2">Segundo Apellido:</label>
                  <input type="text" class="form-control" id="apellido_2" name="apellido_2"
                    [(ngModel)]="nuevoUsuario.apellido_2">
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="email">Email<span class="obligatorio"></span>:</label>
              <input type="email" class="form-control" id="email" name="email" [(ngModel)]="nuevoUsuario.email"
                required>
              <div *ngIf="submitted && !nuevoUsuario.email" class="invalid-feedback">El email es obligatorio.</div>
            </div>
            <div class="form-group">
              <label for="rol">Rol<span class="obligatorio"></span>:</label>
              <select class="form-control" id="rol" name="rol" [(ngModel)]="nuevoUsuario.rol" required>
                <option *ngFor="let rol of roles" [value]="rol.id_rol">{{ rol.desc_rol }}</option>
              </select>
              <div *ngIf="submitted && !nuevoUsuario.rol" class="invalid-feedback">Debe seleccionar un rol.</div>
            </div>
            <div class="form-group">
              <label for="estado">Estado<span class="obligatorio"></span>:</label>
              <select class="form-control" id="estado" name="estado" [(ngModel)]="nuevoUsuario.estado" required>
                <option [ngValue]="true">Activo</option>
                <option [ngValue]="false">Inactivo</option>
              </select>
              <div *ngIf="submitted && nuevoUsuario.estado === null" class="invalid-feedback">Debe seleccionar un
                estado.</div>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Registrar Usuario</button>
          </form>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div *ngIf="mensajeExito" class="alert alert-success">{{ mensajeExito }}</div>
      <div *ngIf="mensajeError" class="alert alert-danger">{{ mensajeError }}</div>

      <!-- Mostrar el password generado si está disponible -->
      <div *ngIf="passwordGenerado" class="alert alert-info">
        Password Generado: {{ passwordGenerado }}
      </div>
      <div class="card">
        <div class="card-body">
          <h2 class="card-title text-center">Previsualización</h2>
          <div class="table-responsive">
            <table class="table table-bordered table-striped">
              <tbody>
                <tr>
                  <th style="width: 40%;">Nombres</th>
                  <td>{{nuevoUsuario.nombre_1}} {{nuevoUsuario.nombre_2}}</td>
                </tr>
                <tr>
                  <th style="width: 40%;">Apellidos</th>
                  <td>{{nuevoUsuario.apellido_1}} {{nuevoUsuario.apellido_2}}</td>
                </tr>
                <tr>
                  <th style="width: 40%;">Tipo de Documento</th>
                  <td>{{nuevoUsuario.tdoc_user}}</td>
                </tr>
                <tr>
                  <th style="width: 40%;">Número de Documento</th>
                  <td>{{nuevoUsuario.id_user}}</td>
                </tr>
                <tr>
                  <th style="width: 40%;">Email</th>
                  <td>{{nuevoUsuario.email}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>